# Add the following 2 lines to your .git/config file
# [include]
#  path = ../.gitalias

[alias]

	current = rev-parse --abbrev-ref HEAD					# get current branch

	rebuild-tags = !git tag -l | xargs git tag -d && git fetch -t	# rebuild local tags from remote
   
	last-com = log -1 HEAD --stat							# show last commit
   
	uncommit = reset --soft HEAD~1						# reset last commit	
   
	log-pretty = log --pretty=oneline 						# show list of commits
	
	no-assume-unchanged = "!f() { git update-index --no-assume-unchanged $1; }; f"
	
	assume-unchanged = "!f() { git update-index --assume-unchanged $1; }; f"
   
	list-branches = "!f() { echo "Listing branches"; git branch -vva; }; f"
   
	# add and commit all changes
	# params: commit message
	com-all = "!f() {\
		echo \"\\033[33m- Adding Commit with all modifications\\033[0m\";\
		echo \"\\033[36m\"'-- Command: git commit -am \"'\"$1\"'\"'\"\\033[0m\";\
		git commit -am \"$1\";\
	}; f"
	
	# add,commit and push all changes
	# params: commit message
	push-all = "!f() {\
		git com-all \"$1\";\
		echo \"\\033[33m- Pushing commit\\033[0m\";\
		echo \"\\033[36m-- Command: git push origin\\033[0m\";\
		git push origin;\
	}; f"
	
	# update latest release files from current branch
	# params: commit message (optional)
	update-release = "!f() {\
   		lastrev=$(git rev-list --tags --max-count=1);\
		tag=$(git describe --tags "$lastrev");\
		commit_msg=\""ci: update version to $tag"\";\
		echo \"\\033[33m- Deleting release $tag\\033[0m\";\
		echo \"\\033[36m\"'-- Command: git tag -f -a \"'\"$tag\"'\" -m \"'\"$commit_msg\"'\"'\"\\033[0m\";\
		git tag -f -a $tag -m \"$commit_msg\";\
		target=$(git rev-parse --abbrev-ref HEAD);\
		echo \"\\033[33m- Creating release with tag $tag from target $target\\033[0m\";\
		echo \"\\033[36m-- Command: git push origin -f $tag\\033[0m\";\
		git push origin -f $tag;\
	}; f"
